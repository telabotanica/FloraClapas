<!DOCTYPE html>
<html>
	<head> 
		<title>Carnet en ligne</title> 
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<meta http-equiv="content-style-type" content="text/css" />
		<meta http-equiv="content-script-type" content="text/javascript" />
		<meta http-equiv="content-language" content="fr" />
		<meta http-equiv="cache-control" content="no-cache">
		
		<!-- Favicones -->
		<link rel="shortcut icon" type="image/x-icon" href="img/s_favicon.ico" />
		
		<!-- Viewport -->
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> 
		
		
		<!-- CSS -->
		<link href="css/normalize.css" rel="stylesheet" type="text/css" />
		<link href="css/bootstrap.mobile.css" rel="stylesheet" type="text/css"/>
			
		
		<!-- my CSS -->
		<link href="less/bootstrap.less" rel="stylesheet/less" type="text/css" />
		<link href="less/ailante-bs.less" rel="stylesheet/less" type="text/css" />
		
		<!-- Javascript -->
		<script src="http://www.tela-botanica.org/commun/jquery/1.7.1/jquery-1.7.1.min.js"></script>		
		

		<script type="text/javascript" src="js/capture.js"></script>
	</head>
	
	
	<body class="container"> 
		
		<header class="row clearfix margin-bottom-1em white-bg black">
			<a href="index.html">
				<img src="img/_logo_tela_qr.png" class="pull-left span3 logo" />
			</a>

			<div class="pull-left titre span7">
				Ajout observations <br /> Carnet en ligne
			</div>
			
			<div class="margin-top-1em">
				<img src="img/s_info_alpha.png" class="pull-left span1 logo " />
			</div>
		</header>
		
		
		
		<div>
			<form id="form-obs" action="#" autocomplete="on">
				<div class="row">
					<div>
						<label for="referentiel" title="Réferentiel">
							Référentiel
						</label>
						<span class="input-prepend">
							<span id="referentiel-icone" class="add-on"><i class="icon-book"></i></span>
							<select id="referentiel" autocomplete="off">
								<option value="bdtfx" selected="selected" title="Trachéophytes de France métropolitaine">Métropole (BDTFX)</option>
								<option value="bdtxa" title="Trachéophytes des Antilles">Antilles françaises (BDTXA)</option>
							</select>
						</span>
					</div>
				</div>
								
				
				<div id="taxon-input-groupe" class="row" >
					<label for="taxon" title="Choisissez une espèce">
						<strong class="obligatoire">*</strong> 
						Espèce  <em>(ou indication sur la plante)</em>
					</label>
					<div class="input-prepend">
						<span class="add-on">
							<i class="icon-leaf"></i>
						</span>
						<input type="text" id="taxon" name="taxon" value="" />
					</div>
				</div>
				
								
				<div class="row">
					<label for="referentiel" title="Réferentiel">
						Certitude
					</label>
					<span class="input-prepend">
						<span id="referentiel-icone" class="add-on"><i class="icon-book"></i></span>
						<select id="referentiel" autocomplete="off">
							<option value="100" selected="selected" >Certain(e)</option>
							<option value="0" >Hasard</option>
						</select>
					</span>
				</div>
			</form>
							
							
							
			<div class="align-center margin-top-1em">
				<div class="btn" id="lien-precisions" onclick="inverse_precisions(this.id);">Afficher les précisions</div>
			</div>
					
			<ul class="nav nav-tabs" id="myTab">						
				<li class="active"><a href="#precisions-lieu">Précisions lieu</a></li>
				<li><a href="#precisions-plante">Précisions plante</a></li>
				<li><a href="#localisation">Z</a></li>
			</ul>
 
			<div id="precisions-txt" hidden="true">
				<div class="tab-content">
					<div class="tab-pane active" id="precisions-lieu">
						<form id="form-lieu" class="control-group" action="#" enctype="multipart/form-data" autocomplete="on">
							<div rel="tooltip" 
								title="Toponyme plus précis que la commune, utilisé localement et se trouvant souvent sur les cartes au 1/25 000." >
								<label for="lieudit">Lieu-dit</label>
								<div>
									<input type="text" id="lieudit" name="lieudit"/>
								</div>
							</div>
							<div rel="tooltip" 
								title="Lieu précis de l'observation définissant une unité écologique homogène (ex: le pré derrière la maison)." >
								<label for="station">Station</label>
								<div>
									<input type="text" id="station" name="station"/>
								</div>
							</div>
							<div rel="tooltip" 
								title="Type d'habitat plus ou moins standardisé dans les codes Corine ou Catminat (ex: prairie humide).">
								<label for="milieux">Habitat</label>
								<div>
									<input type="text" id="milieu" name="milieu" />
								</div>
							</div>
						</form>	
					</div>
		
		
					<div class="tab-pane" id="precisions-plante">
						<form id="form-plante" class="control-group" action="#" enctype="multipart/form-data" autocomplete="on">
								<div>
									<label for="abondance">Abondance</label>
									<div>
										<input type="text" id="abondance" name="abondance"/>
									</div>
								</div>
								<div>
									<label for="stade_ph">Stade phénologique</label>
									<div>
										<input type="text" id="stade_ph" name="stade_ph"/>
									</div>
								</div>
						</form>	
					</div>
		
		
					<div class="tab-pane" id="localisation">
						<form id="form-gps" class="control-group" action="#" enctype="multipart/form-data" autocomplete="off">											
							<div class="margin-top-1em gris-bg span10">
								<label>
									Localisation de l'appareil
								</label>
								<input type="text" class="btn disabled" id="lat_field" name="latitude" />
								<input type="text" class="btn disabled" id="long_field" name="longitude" />
								<input type="text" class="btn disabled" id="date" name="date" value="" />
							 
								<script>
									navigator.geolocation.getCurrentPosition(
										function(pos) {
											$("#lat_field").val(pos.coords.latitude);
											$("#long_field").val(pos.coords.longitude);
											
											document.getElementById('lat_field').value = pos.coords.latitude;
											document.getElementById('long_field').value = pos.coords.longitude;
										}, 
										function(error) {
											alert('code: '    + error.code    + '\n' +
												  'message: ' + error.message + '\n');
										}
									);
				
									var d = new Date();

									var month = d.getMonth()+1;
									var day = d.getDate();

									$("#date").val(
										((''+day).length<2 ? '0' : '') + day + '/' +
										((''+month).length<2 ? '0' : '') + month + '/' +
										d.getFullYear()
									);
//*									
									$('#myTab a').click(function (e) {
										e.preventDefault();
										$(this).tab('show');
									})
									
									function inverse_precisions(d) {
										if ($('#precisions-txt').is(":visible")) {
											$('#precisions-txt').hide();
											document.getElementById(d).innerHTML = "Afficher les précisions";
										} else {
											$('#precisions-txt').show();
											document.getElementById(d).innerHTML = "Masquer les précisions";
										}
									}
//*/
								</script>
							</div>
						</form>	
					</div>
				</div> <!-- #tab-content -->
			</div> <!-- #precisions-txt -->
			
																							
			
			<div class="row">
				<h4>Photo : 
					<button type="button" onclick="capturePhoto();" class="btn btn-large">
						<i class="icon-camera"></i>
					</button>
				</h4>
			</div>

			<img id="myImage" src="" width="50%" style="display:none"/>
			<input type="button" onclick="deletePhoto();" value="Supprimer la photo" />
			
			
			
			<div class="row">
				<div class="span12 align-center">
					<button id="ajouter-obs" class="btn btn-primary btn-large" type="button">
						Ajouter Obs
					</button>
				</div>
			</div>
			
							
			<a onclick="OnLoad();">Test Connexion</a>
			<div id="liste-obs" ></div>
		</div>
		<script type="text/javascript">
			function OnLoad () {
				if ('onLine' in navigator) {
					if (navigator.onLine) {
						alert ("Your browser is working online.");
					}
					else {
						alert ("Your browser is working offline.");
					}
				}
				else {
					alert ("Your browser does not support the onLine property.");
				}
			}
		</script>
		
				
		
		<footer class="vert-fonce-bg white">
			<div class="row margin-ud-1em">
				<div class="span2 margin-left-05em">
					<a href="">
						Ajout
					</a>
				</div>
				<div class="span2 margin-right-05em">
					<a href="">
						Accueil
					</a>
				</div>
				<div class="span3 margin-right-05em">
					<a href="">
						Espèces
					</a>
				</div>
				<div class="span3 margin-right-05em">
					<a href="">
						Mon profil
					</a>
				</div>
			</div>
		</footer>
		
		
		<script src="js/less-1.3.3.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="phonegap.js"></script>		
	</body>
	
</html>
